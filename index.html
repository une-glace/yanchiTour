<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>盐池旅游导览</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="site-header">
    <div class="site-title">
      <span class="site-title-main">盐池旅游导览</span>
      <span class="site-title-sub">你的盐池旅行小助手</span>
      <div class="search-container">
        <input type="text" class="search-input" id="search-input" placeholder="搜索景点、住宿...">
        <button class="search-button" id="search-button">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <section class="hero-carousel">
    <div class="hero-image-wrapper">
      <img id="hero-image" src="" alt="盐池风光">
      <div class="hero-overlay">
        <h1 id="hero-title">盐池的风光与人文气息</h1>
        <p id="hero-desc">从草原湿地到长城遗址，感受盐池独特的塞上魅力。</p>
      </div>
      <button class="carousel-arrow carousel-arrow-left" id="hero-prev" type="button">&#8249;</button>
      <button class="carousel-arrow carousel-arrow-right" id="hero-next" type="button">&#8250;</button>
    </div>
    <div class="hero-dots" id="hero-dots"></div>
  </section>

  <section id="search-results" class="search-results-section" style="display: none;">
    <div class="content_title">搜索结果</div>
    <div id="search-results-list" class="search-results-list"></div>
  </section>

  <main>
    <section class="quick-nav">
      <div class="content_title">快速导览</div>
      <div class="nav-grid">
        <a class="nav-item" href="attractions.html">
          <div class="nav-icon nav-icon-1"></div>
          <div class="item_title">景点</div>
          <div class="nav-text-sub">看草原看湿地看长城</div>
        </a>
        <a class="nav-item" href="food.html">
          <div class="nav-icon nav-icon-2"></div>
          <div class="item_title">美食</div>
          <div class="nav-text-sub">品味盐池美食</div>
        </a>
        <a class="nav-item" href="stay.html">
          <div class="nav-icon nav-icon-3"></div>
          <div class="item_title">住宿</div>
          <div class="nav-text-sub">找到安心落脚处</div>
        </a>
        <a class="nav-item" href="plan.html">
          <div class="nav-icon nav-icon-5"></div>
          <div class="item_title">行程</div>
          <div class="nav-text-sub">定制你的盐池之旅</div>
        </a>
      </div>
    </section>

    <section class="reasons-section">
      <div class="content_title">选择盐池的“N个理由”</div>
      <div class="reason-grid">
        <div class="reason-card">
          <div class="reason-img reason-img-1">
            <img src="indexFig/Icon/1.png" alt="盐池理由1图标">
          </div>
          <div class="reason-title">滩羊美食甲天下</div>
          <div class="reason-desc">宁夏盐池滩羊是中国地理标志产品，肉质细嫩、不膻不腥，手抓羊肉、烤全羊等特色美食让你大快朵颐。</div>
        </div>
        <div class="reason-card">
          <div class="reason-img reason-img-2">
            <img src="indexFig/Icon/2.png" alt="盐池理由2图标">
          </div>
          <div class="reason-title">长城遗址纵横交错</div>
          <div class="reason-desc">这里保留着中国最密集的长城遗址，隋、明两代长城并存，漫步其中，能触摸到千年的历史脉络。</div>
        </div>
        <div class="reason-card">
          <div class="reason-img reason-img-3">
            <img src="indexFig/Icon/3.png" alt="盐池理由3图标">
          </div>
          <div class="reason-title">草原湿地生态独特</div>
          <div class="reason-desc">哈巴湖、花马湖等湿地草原风光旖旎，四季景色各异，是观鸟、摄影和生态研学的绝佳去处。</div>
        </div>
        <div class="reason-card">
          <div class="reason-img reason-img-4">
            <img src="indexFig/Icon/4.png" alt="盐池理由4图标">
          </div>
          <div class="reason-title">红色文化底蕴深厚</div>
          <div class="reason-desc">作为陕甘宁边区的重要组成部分，盐池革命历史纪念馆等红色景点，带你重温峥嵘岁月。</div>
        </div>
        <div class="reason-card">
          <div class="reason-img reason-img-5">
            <img src="indexFig/Icon/5.png" alt="盐池理由5图标">
          </div>
          <div class="reason-title">荞面皮艺地道风物</div>
          <div class="reason-desc">荞麦面食筋道爽口，羊皮制品保暖实用，是兼具风味与匠心的塞上伴手礼。</div>
        </div>
        <div class="reason-card">
          <div class="reason-img reason-img-6">
            <img src="indexFig/Icon/6.png" alt="盐池理由6图标">
          </div>
          <div class="reason-title">河谷徒步穿越古今</div>
          <div class="reason-desc">月儿泉村 9 公里河谷路线，水草古堡俱全，轻松解锁露营与历史沉浸体验。</div>
        </div>
      </div>
    </section>

    <section class="follow-section">
      <h2 class="section-title">关注盐池动态</h2>
      <p class="section-subtitle">扫码关注相关平台账号，实时了解项目与实践进展</p>
      <div class="follow-grid">
        <div class="follow-card">
          <div class="follow-front">
            <div class="follow-icon">
              <img src="indexFig/Icon/官方公众号.png" alt="官方公众号图标">
            </div>
            <div class="follow-name">官方公众号</div>
          </div>
          <div class="follow-qr">
            <img src="indexFig/qrCode/官方公众号.jpg" alt="官方公众号二维码">
          </div>
        </div>
        <div class="follow-card">
          <div class="follow-front">
            <div class="follow-icon">
              <img src="indexFig/Icon/视频号.png" alt="视频号图标">
            </div>
            <div class="follow-name">视频号</div>
          </div>
          <div class="follow-qr">
            <div class="qr-placeholder">二维码占位</div>
          </div>
        </div>
        <div class="follow-card">
          <div class="follow-front">
            <div class="follow-icon">
              <img src="indexFig/Icon/B站.png" alt="B站图标">
            </div>
            <div class="follow-name">B站</div>
          </div>
          <div class="follow-qr">
            <div class="qr-placeholder">二维码占位</div>
          </div>
        </div>
        <div class="follow-card">
          <div class="follow-front">
            <div class="follow-icon">
              <img src="indexFig/Icon/小红书.png" alt="小红书图标">
            </div>
            <div class="follow-name">小红书</div>
          </div>
          <div class="follow-qr">
            <div class="qr-placeholder">二维码占位</div>
          </div>
        </div>
        <div class="follow-card">
          <div class="follow-front">
            <div class="follow-icon follow-icon-douyin">
              <img src="indexFig/Icon/抖音.png" alt="抖音图标">
            </div>
            <div class="follow-name">抖音</div>
          </div>
          <div class="follow-qr">
            <div class="qr-placeholder">二维码占位</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div>盐池品牌旅游导览 · 示例网站</div>
    <div class="footer-sub">图片由在线占位图服务随机生成，仅作展示结构使用</div>
  </footer>

  <script>
    const header = document.querySelector(".site-header");
    let lastScrollY = window.scrollY;

    window.addEventListener("scroll", () => {
      const currentY = window.scrollY;
      const delta = currentY - lastScrollY;

      if (currentY > 80 && delta > 0) {
        header.classList.add("site-header--hidden");
      } else if (delta < 0 || currentY <= 80) {
        header.classList.remove("site-header--hidden");
      }

      lastScrollY = currentY;
    });

    const heroData = [
      {
        title: "晨光里的哈巴湖湿地",
        desc: "清晨薄雾轻拂水面，候鸟掠过草甸与湖泊，盐池的柔和一面在这里铺展开来。",
        seed: "yanchi-habahulake-morning"
      },
      {
        title: "傍晚滩羊小镇灯火",
        desc: "夕阳映照街巷与屋顶，烤全羊的香气伴着灯光升起，是盐池最具烟火气的一刻。",
        seed: "yanchi-town-sunset"
      },
      {
        title: "长城遗址上的星空",
        desc: "在寂静的长城烽火台附近仰望夜空，古老城墙与银河交织出独特的时间感。",
        seed: "yanchi-greatwall-stars"
      },
      {
        title: "月儿泉村的古堡与河谷",
        desc: "沿着河谷散步，古堡、村庄与水草相映成趣，展现盐池兼具历史与自然的风貌。",
        seed: "yanchi-yueerquan-valley"
      }
    ];

    const heroImage = document.getElementById("hero-image");
    const heroTitle = document.getElementById("hero-title");
    const heroDesc = document.getElementById("hero-desc");
    const heroDots = document.getElementById("hero-dots");
    const heroPrev = document.getElementById("hero-prev");
    const heroNext = document.getElementById("hero-next");

    let heroIndex = 0;

    function buildHeroDots() {
      heroDots.innerHTML = "";
      heroData.forEach((item, index) => {
        const dot = document.createElement("button");
        dot.className = "hero-dot";
        dot.setAttribute("type", "button");
        dot.addEventListener("click", () => {
          heroIndex = index;
          updateHero();
          resetHeroTimer();
        });
        heroDots.appendChild(dot);
      });
    }

    function updateHero() {
      const item = heroData[heroIndex];
      const url = "https://picsum.photos/1200/520?random=" + encodeURIComponent(item.seed);
      heroImage.src = url;
      heroTitle.textContent = item.title;
      heroDesc.textContent = item.desc;

      Array.from(heroDots.children).forEach((dot, index) => {
        if (index === heroIndex) {
          dot.classList.add("active");
        } else {
          dot.classList.remove("active");
        }
      });
    }

    let heroTimer = null;

    function startHeroTimer() {
      heroTimer = setInterval(() => {
        heroIndex = (heroIndex + 1) % heroData.length;
        updateHero();
      }, 5000);
    }

    function resetHeroTimer() {
      if (heroTimer) {
        clearInterval(heroTimer);
      }
      startHeroTimer();
    }

    heroPrev.addEventListener("click", () => {
      heroIndex = (heroIndex - 1 + heroData.length) % heroData.length;
      updateHero();
      resetHeroTimer();
    });

    heroNext.addEventListener("click", () => {
      heroIndex = (heroIndex + 1) % heroData.length;
      updateHero();
      resetHeroTimer();
    });

    buildHeroDots();
    updateHero();
    startHeroTimer();

    const searchInput = document.getElementById("search-input");
    const searchButton = document.getElementById("search-button");
    const searchResultsSection = document.getElementById("search-results");
    const searchResultsList = document.getElementById("search-results-list");
    const heroSection = document.querySelector(".hero-carousel");

    const database = [
      {
        id: "yanchi-habahulake",
        type: "attraction",
        name: "哈巴湖湿地公园",
        location: "哈巴湖景区",
        tags: ["湿地风光", "观鸟拍照"],
        summary: "湖泊与草甸交织成片，候鸟在水面起落，是感受盐池生态之美的代表性景点。",
        url: "attraction-detail.html?id=yanchi-habahulake"
      },
      {
        id: "yanchi-redmemorial",
        type: "attraction",
        name: "盐池革命历史纪念馆",
        location: "县城城区",
        tags: ["红色文化", "研学实践"],
        summary: "通过文物、图片与多媒体展示盐池在革命年代的重要地位，是了解地方历史的必访之处。",
        url: "attraction-detail.html?id=yanchi-redmemorial"
      },
      {
        id: "yanchi-chunxue",
        type: "attraction",
        name: "春雪文化产业园",
        location: "盐池县东顺工业园区",
        tags: ["非遗传承", "乡村旅游", "研学教育"],
        summary: "集非遗传承、乡村旅游与产业融合发展的综合性园区，包含滩羊皮工艺画制作、荞麦壳养生耳枕生产等非遗项目，建有枕头文化馆、民俗文化馆等展馆设施，2021年底获批AA级旅游景区资质。",
        url: "attraction-detail.html?id=yanchi-chunxue"
      },
      {
        id: "yanchi-cultural",
        type: "attraction",
        name: "盐池县文化馆",
        location: "盐池县城",
        tags: ["公共文化", "非遗传承", "免费开放"],
        summary: "承担公共文化服务职能的县级文化设施，2021年11月被纳入全国一级文化馆公示名单，通过组织文艺展演、非遗传承、免费培训等活动满足群众文化需求。",
        url: "attraction-detail.html?id=yanchi-cultural"
      },
      {
        id: "yanchi-greatwall-museum",
        type: "attraction",
        name: "长城关博物馆",
        location: "盐池县盐州古城4A旅游景区",
        tags: ["长城文化", "博物馆", "历史遗迹"],
        summary: "以长城为主题内容的专题性博物馆，坐落于中国万里长城中唯一以'长城'而命名的关隘长城关脚下，现有东西两个展厅共4200平方米。",
        url: "attraction-detail.html?id=yanchi-greatwall-museum"
      },
      {
        id: "yanchi-hotel",
        type: "food",
        name: "盐池宾馆",
        location: "盐池县花马东街1号",
        tags: ["中华餐饮名店", "滩羊美食", "星级酒店"],
        summary: "盐池宾馆是一家融餐饮、住宿于一体的旅游饭店，提供烤全羊、酸汤羊腿、汗蒸羊排等特色菜肴，先后被评为'中华餐饮名店'、'宁夏餐饮名店'等荣誉称号。",
        url: "food-detail.html?id=yanchi-hotel"
      },
      {
        id: "yanchi-fuhai",
        type: "food",
        name: "盐池福海大酒店",
        location: "盐池县花马池西街303号",
        tags: ["高星级酒店", "商务会议", "滩羊美食"],
        summary: "盐池福海大酒店是一家集住宿、餐饮、商务、会议、旅游等功能为一体的国家高星级旅游饭店，位于县城核心区域，位置优越，交通便利。",
        url: "food-detail.html?id=yanchi-fuhai"
      },
      {
        id: "yanchi-junhao",
        type: "food",
        name: "盐池君豪酒店",
        location: "盐池县花马池西街北侧",
        tags: ["智能化酒店", "商务酒店", "滩羊美食"],
        summary: "盐池君豪酒店是按照国家星级标准投资建设的高端智能化商务酒店，地理位置优越，交通便利，是您在盐池旅游、出差期间的理想选择。",
        url: "food-detail.html?id=yanchi-junhao"
      },
      {
        id: "yanchi-xiaobang",
        type: "food",
        name: "盐池潇邦酒店",
        location: "盐池县",
        tags: ["舒适住宿", "便捷出行", "滩羊美食"],
        summary: "盐池潇邦酒店提供舒适的住宿环境，位置便利，适合自驾游客，周边餐饮选择丰富。",
        url: "food-detail.html?id=yanchi-xiaobang"
      },
      {
        id: "yanchi-xian",
        type: "food",
        name: "盐池希岸酒店",
        location: "盐池县",
        tags: ["精品酒店", "宠爱文化", "贴心服务"],
        summary: "希岸酒店是锦江酒店旗下一个定位为时尚轻者跨界精品的酒店品牌，以'小幸感，宠你开始'为核心价值主张，为宾客提供贴心服务。",
        url: "food-detail.html?id=yanchi-xian"
      }
    ];

    function tokenize(text) {
      const result = [];
      let current = "";
      for (let i = 0; i < text.length; i++) {
        const char = text[i];
        if (char >= "\u4e00" && char <= "\u9fff") {
          if (current) {
            result.push(current.toLowerCase());
            current = "";
          }
          result.push(char);
        } else if (char >= "a" && char <= "z" || char >= "A" && char <= "Z" || char >= "0" && char <= "9") {
          current += char.toLowerCase();
        } else {
          if (current) {
            result.push(current.toLowerCase());
            current = "";
          }
        }
      }
      if (current) {
        result.push(current.toLowerCase());
      }
      return result;
    }

    class BM25 {
      constructor(documents, k1 = 1.2, b = 0.75) {
        this.k1 = k1;
        this.b = b;
        this.documents = documents;
        this.corpus = documents.map(doc => this.extractText(doc));
        this.idf = {};
        this.docLengths = [];
        this.avgDocLength = 0;
        this.buildIndex();
      }

      extractText(doc) {
        const fields = [doc.name, doc.summary, doc.location, ...doc.tags].join(" ");
        return fields;
      }

      buildIndex() {
        const N = this.corpus.length;
        let totalLength = 0;
        const docTermFreqs = [];

        this.corpus.forEach(text => {
          const tokens = tokenize(text);
          const termFreq = {};
          tokens.forEach(token => {
            termFreq[token] = (termFreq[token] || 0) + 1;
          });
          docTermFreqs.push(termFreq);
          this.docLengths.push(tokens.length);
          totalLength += tokens.length;
        });

        this.avgDocLength = totalLength / N;

        const df = {};
        docTermFreqs.forEach(termFreq => {
          Object.keys(termFreq).forEach(term => {
            df[term] = (df[term] || 0) + 1;
          });
        });

        Object.keys(df).forEach(term => {
          this.idf[term] = Math.log((N - df[term] + 0.5) / (df[term] + 0.5) + 1);
        });

        this.docTermFreqs = docTermFreqs;
      }

      search(query, limit = 10) {
        const queryTokens = tokenize(query);
        const scores = [];

        this.documents.forEach((doc, docIndex) => {
          let score = 0;
          const termFreq = this.docTermFreqs[docIndex];
          const docLength = this.docLengths[docIndex];

          queryTokens.forEach(token => {
            const freq = termFreq[token] || 0;
            if (freq > 0) {
              const idf = this.idf[token] || 0;
              const numerator = freq * (this.k1 + 1);
              const denominator = freq + this.k1 * (1 - this.b + this.b * docLength / this.avgDocLength);
              score += idf * numerator / denominator;
            }
          });

          if (score > 0) {
            scores.push({ document: doc, score: score });
          }
        });

        scores.sort((a, b) => b.score - a.score);
        return scores.slice(0, limit);
      }
    }

    const bm25 = new BM25(database);

    function getTypeLabel(type) {
      const labels = {
        attraction: "景点",
        stay: "住宿",
        food: "美食"
      };
      return labels[type] || type;
    }

    function renderSearchResults(results) {
      searchResultsList.innerHTML = "";

      if (results.length === 0) {
        searchResultsList.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #6b7280;">
            <p>未找到相关结果</p>
          </div>
        `;
        return;
      }

      results.forEach(result => {
        const doc = result.document;
        const item = document.createElement("div");
        item.className = "search-result-item";
        item.onclick = () => {
          window.location.href = doc.url;
        };

        const typeLabel = document.createElement("span");
        typeLabel.className = `search-result-type ${doc.type}`;
        typeLabel.textContent = getTypeLabel(doc.type);

        const title = document.createElement("div");
        title.className = "search-result-title";
        title.textContent = doc.name;

        const summary = document.createElement("div");
        summary.className = "search-result-summary";
        summary.textContent = doc.summary;

        const meta = document.createElement("div");
        meta.className = "search-result-meta";

        const location = document.createElement("div");
        location.className = "search-result-location";
        location.textContent = doc.location;

        const tags = document.createElement("div");
        tags.textContent = doc.tags.join(" · ");

        meta.appendChild(location);
        meta.appendChild(tags);

        item.appendChild(typeLabel);
        item.appendChild(title);
        item.appendChild(summary);
        item.appendChild(meta);

        searchResultsList.appendChild(item);
      });
    }

    function performSearch() {
      const query = searchInput.value.trim();
      if (!query) {
        searchResultsSection.style.display = "none";
        if (heroSection) {
          heroSection.style.display = "block";
        }
        return;
      }

      const results = bm25.search(query, 20);
      renderSearchResults(results);
      searchResultsSection.style.display = "block";
      if (heroSection) {
        heroSection.style.display = "none";
      }
    }

    searchButton.addEventListener("click", performSearch);

    searchInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        performSearch();
      }
    });

    searchInput.addEventListener("input", () => {
      if (searchInput.value.trim() === "") {
        searchResultsSection.style.display = "none";
        if (heroSection) {
          heroSection.style.display = "block";
        }
      }
    });
  </script>
</body>
</html>

